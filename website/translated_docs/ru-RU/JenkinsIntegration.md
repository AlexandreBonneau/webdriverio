---
id: jenkins
title: Интеграция с Jenkins
---

WebdriverIO может работать с системами непрерывной интеграции (CI), такими как [Jenkins](https://jenkins-ci.org/). В этом примере для отладки тестов и получения отчетов рассмотрим [junit reporter](https://github.com/webdriverio/wdio-junit-repo). Сам процесс интеграции довольно прост.

Во-первых, нам необходимо назначить `junit` в качестве репортера. Так же, стоит убедиться, что репортер установлен (`$ npm install --save-dev wdio-junit-reporter`) и что место, куда мы будем сохранять XUnit отчеты, доступно для Jenkins'а. Следовательно, назначаем репортер в файле конфигурации:

```js
// wdio.conf.js
module.exports = {
    // ...
    reporters: [
        'dot',
        ['junit', {
            outputDir: './'
        }]
    ],
    // ...
};
```

Тестовый фреймворк, в данном случае, не имеет значения. Отчеты будут одинаковы. В этом руководстве использован Jasmine. Написав неколько тестовых сценариев, можно приступать к настройке новой задачи в Jenkins. Даем имя и описание:

![Имя и описание](/img/jenkins/jobname.png "Name And Description")

Затем убеждаемся, что Jenkins всегда будет стягивать последнюю версию проекта:

![Jenkins Git Setup](/img/jenkins/gitsetup.png "Jenkins Git Setup")

Самая важная часть: добавляем build step для выполнения shell комманд. Здесь будет происходить сборка проекта. В случае нашего примера, тестируется стороннее приложение, поэтому, собирать ничего не будем. Нужно только установить все зависимости и запустить тесты командой `npm test` (алиас для `node_modules/.bin/wdio test/wdio.conf.js`).

![Build Step](/img/jenkins/runjob.png "Build Step")

По окончанию тестов нам нужно, чтобы Jenkins увидел сгенерированный XUnit репорт. Для этого в post-build действия добавляем *"Publish JUnit test result report"*. Как альтернатива, можно установить сторонний XUnit плагин для обработки отчетов. JUnit работает в Jenkins из коробки и для первого запуска его будет достаточно.

Как было указано в файле с конфигурациями, отчеты будут сохраняться в корневой директории проекта. Формат отчетов — xml. Поэтому, чтобы Jenkins увидел и обработал их, достаточно указать на все xml файлы в корневой директории:

![Post-build Action](/img/jenkins/postjob.png "Post-build Action")

Вот и всё! Этого достаточно, чтобы тесты на WebdriverIO запускались в Jenkins'е. Запуск тестов теперь будет дополнен отчетами с графиками, трассировкой стека тестов, которые упали, а так же списком команд, использованых в каждом тесте.

![Интеграция с Jenkins](/img/jenkins/final.png "Jenkins Final Integration")